â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  VIA (Variability In Atmosphere) SPECTROMETER QUICK REFERENCE    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

HARDWARE SETUP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1. AvaSpec USB (spliced) â†’ Teensy 4.1 USB Host pads
     ðŸŸ¥ Red (5V) â†’ 5V pad
     ðŸŸ© Green (D+) â†’ D+ pad
     â¬œ White (Dâ€“) â†’ Dâ€“ pad
     â¬› Black (GND) â†’ GND pad

  2. Teensy micro-USB â†’ Computer (serial console)
  3. SD card inserted (optional for logging)
  4. Open serial terminal at 115200 baud

COMMANDS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  help              Show command help
  measure           Take one measurement
  identify          Query device info
  auto [sec]        Start auto mode (default: 100s)
  stop              Stop auto mode
  status            Show system status
  sd-on             Enable SD logging
  sd-off            Disable SD logging

QUICK START
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1. Upload firmware:
     cd AvaSpecDriver && pio run --target upload

  2. Open serial terminal:
     screen /dev/ttyACM0 115200
     (or PuTTY on Windows COM port)

  3. Take a measurement:
     VIA> measure

  4. Start auto mode:
     VIA> auto 60    (measure every 60 seconds)

  5. Stop auto mode:
     VIA> stop

EXAMPLES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Single measurement:
    VIA> measure

  Auto mode (every 30 seconds):
    VIA> auto 30

  Check status:
    VIA> status

  Enable logging, then measure:
    VIA> sd-on
    VIA> measure

  Stop auto measurements:
    VIA> stop

USB CONNECTION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  The AvaSpec USB-A cable is spliced and terminated with pin
  headers to mate with Teensy 4.1 USB Host pads.

  Connection follows standard USB color codes:
    ðŸŸ¥ Red    (5V)  - Power from payload 5V bus
    ðŸŸ© Green  (D+)  - USB data positive
    â¬œ White  (Dâ€“)  - USB data negative (twisted with D+)
    â¬› Black  (GND) - Ground

  Communication: USB 2.0 register commands (480 Mbit/s)
  Library: USBHost_t36 (Paul Stoffregen)
  Driver: Custom AvaSpec driver for Teensy

TERMINAL PROGRAMS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Linux/Mac:
    screen /dev/ttyACM0 115200
    minicom -D /dev/ttyACM0 -b 115200
    pio device monitor -b 115200

  Windows:
    PuTTY: COM port, 115200 baud
    Arduino Serial Monitor: 115200 baud

DATA FILES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Files saved on SD card:
    meas_0001.txt     - First measurement (hex)
    spectrum_0001.csv - CSV format (Pixel,Intensity)
    meas_0002.txt     - Second measurement
    spectrum_0002.csv - Second spectrum
    ...

  Download files:
    python3 file_transfer.py /dev/ttyACM0 list
    python3 file_transfer.py /dev/ttyACM0 get spectrum_0001.csv

TROUBLESHOOTING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  No serial port?
    Linux: ls /dev/ttyACM*
    Windows: Check Device Manager

  Permission denied?
    sudo chmod 666 /dev/ttyACM0
    (or add user to dialout group)

  No spectrometer detected?
    - Check spliced USB cable connections
    - Verify 5V power to AvaSpec
    - Check D+/Dâ€“ twist integrity
    - Re-plug spectrometer

  Commands not working?
    - Verify 115200 baud rate
    - Check newline terminator setting
    - Type 'VIA_HELP' to test connection
    - Commands are case-insensitive

DOCUMENTATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Quick reference:    VIA_SIMPLE_REF.txt (START HERE!)
  Commands:           VIA_COMMANDS.txt
  Telemetry:          VIA_TELEMETRY.txt
  Full guide:         CONSOLE_GUIDE.md
  File transfer:      FILE_TRANSFER_README.md

VERSION: 3.0 (Command Console Mode)
